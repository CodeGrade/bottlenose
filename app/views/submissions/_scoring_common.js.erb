$(function() {
  const gradesWithOrcaIDs = JSON.parse('<%= raw grades_with_orca_ids %>');
  const orcaURL = '<%= Grader.orca_config['site_url'][Rails.env] %>';
  gradesWithOrcaIDs.forEach(({id, orca_id}) => {
    const statusURL = `${orcaURL}/api/v1/grading_queue/${orca_id}/status`;
    const statusDOMID = `orca-status-grade-${id}`;
    $.ajax({
      url: statusURL,
      type: 'GET',
      dataType: 'json',
      success: function (data) {
        $(`#${statusDOMID}`).text(data);
      },
      error: function (err) {
        $(`#${statusDOMID}`).text(`Could not fetch orca status; ${err.status} ${err.statusText}`);
      }
    });
  });
});
